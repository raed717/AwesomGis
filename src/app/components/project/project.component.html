<div class="container">
  <!-- Map -->
  <div id="map"></div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" (click)="toggleSidebar()" [class.open]="isSidebarOpen">
    <span *ngIf="!isSidebarOpen">â˜°</span>
    <span *ngIf="isSidebarOpen">âœ•</span>
  </button>

  <!-- Sidebar -->
  <div class="sidebar" [class.open]="isSidebarOpen">
    <h3>Map Controls</h3>

    <!-- Shape Counter -->
    <div class="shape-counter">
      <strong>Available Shapes:</strong> {{ shapeCount }}
    </div>

    <!-- Layer Switcher -->
    <div class="control-section">
      <h4>Base Layer</h4>
      <div class="layer-buttons">
        <button 
          class="layer-btn" 
          [class.active]="isNormalLayer"
          (click)="switchLayer('normal')">
          ğŸ—ºï¸ Normal
        </button>
        <button 
          class="layer-btn" 
          [class.active]="isSatelliteLayer"
          (click)="switchLayer('satellite')">
          ğŸ›°ï¸ Satellite
        </button>
      </div>
    </div>

    <!-- Shape Actions -->
    <div class="control-section">
      <h4>Shape Actions</h4>
      
      <!-- Hidden file input -->
      <input 
        type="file" 
        id="shapefileInput" 
        accept=".zip"
        (change)="onFileSelected($event)"
        style="display: none;">
      
      <button 
        class="action-btn import-btn" 
        (click)="triggerFileInput()"
        [disabled]="isImporting">
        ğŸ“ {{ isImporting ? 'Importing...' : 'Import Shapefile' }}
      </button>
      
      <button class="action-btn save-btn" (click)="saveShapes()">
        ğŸ’¾ Save Shapes
      </button>
      <button class="action-btn export-btn" (click)="exportShapes()">
        ğŸ“¥ Export GeoJSON
      </button>
      <button class="action-btn clear-btn" (click)="clearAllShapes()">
        ğŸ—‘ï¸ Clear All
      </button>
    </div>

    <!-- Instructions -->
    <div class="control-section instructions">
      <h4>Instructions</h4>
      <ul>
        <li>Use the toolbar on the left to draw shapes</li>
        <li>Import shapefiles as ZIP files (.shp, .dbf, .shx)</li>
        <li>Click "Edit Mode" to modify existing shapes</li>
        <li>Click "Drag Mode" to move shapes</li>
        <li>Click "Remove" to delete shapes</li>
        <li>Export your work as GeoJSON files</li>
      </ul>
    </div>
  </div>
</div>